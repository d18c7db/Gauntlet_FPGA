@ECHO OFF

SET ROMS=..\roms\gaunt2

REM Layout of ROMs in 16 bit wide RAM
REM               D15-D8 D7-D0
REM  00000-07FFF  1L     1A   32K-32K GS0 plane 1, 0
REM  08000-0FFFF  1MN    1B   32K-32K GS1 plane 1, 0
REM  10000-17FFF  1P     1C   16K-16K GS2 plane 1, 0 plus 16K padding
REM  18000-1FFFF  1R     1D   32K-32K padding
REM  20000-27FFF  1ST    1EF  32K-32K padding
REM  28000-2FFFF  1U     1J   32K-32K padding
REM  30000-37FFF              32K-32K padding
REM  38000-3FFFF              32K-32K padding
REM  40000-47FFF  2L     2A   32K-32K GS0 plane 3, 2
REM  48000-4FFFF  2MN    2B   32K-32K GS1 plane 3, 2
REM  50000-57FFF  2P     2C   16K-16K GS2 plane 3, 2 plus 16K padding
REM  58000-5FFFF  2R     2D   32K-32K padding
REM  60000-67FFF  2ST    2EF  32K-32K padding
REM  68000 6FFFF  2U     2J   32K-32K padding
REM  70000 77FFF              32K-32K padding
REM  78000-7FFFF              32K-32K padding
REM  80000-87FFF  9A     9B   32K-32K ROM0
REM  88000-8FFFF              32K 32K padding
REM  90000-97FFF              32K 32K padding
REM  98000-9FFFF  10A    10B  16K-16K SLAP plus 16K padding
REM  A0000-A7FFF  7A     7B   32K-32K ROM1
REM  A8000-AFFFF  6A     6B   32K-32K ROM2
REM  B0000-B7FFF  5A     5B   32K-32K padding
REM  B8000-BFFFF  3A     3B   32K-32K padding
REM  C0000-C7FFF  16R    16S  16K-32K Audio

REM video ROMS
SET SOURCES=            %ROMS%\136043-1111.1A
SET SOURCES=%SOURCES% + %ROMS%\136037-112.1B
SET SOURCES=%SOURCES% + %ROMS%\136043-1123.1C+%ROMS%\136043-1123.1C
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + %ROMS%\136043-1115.2A
SET SOURCES=%SOURCES% + %ROMS%\136037-116.2B
SET SOURCES=%SOURCES% + %ROMS%\136043-1125.2C+%ROMS%\136043-1125.2C
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
REM 68K main program ROMS
SET SOURCES=%SOURCES% + %ROMS%\136037-1308.9B
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + %ROMS%\136043-1106.10B+%ROMS%\136043-1106.10B
SET SOURCES=%SOURCES% + %ROMS%\136043-1110.7B
SET SOURCES=%SOURCES% + %ROMS%\136043-1122.6B
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
REM 6502 audio program ROMS
SET SOURCES=%SOURCES% + %ROMS%\136043-1119.16S

REM video ROMS
SET SOURCES=%SOURCES% + %ROMS%\136043-1113.1L
SET SOURCES=%SOURCES% + %ROMS%\136037-114.1MN
SET SOURCES=%SOURCES% + %ROMS%\136043-1124.1P+%ROMS%\136043-1124.1P
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + %ROMS%\136043-1117.2L
SET SOURCES=%SOURCES% + %ROMS%\136037-118.2MN
SET SOURCES=%SOURCES% + %ROMS%\136043-1126.2P+%ROMS%\136043-1126.2P
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
REM 68K main program ROMS
SET SOURCES=%SOURCES% + %ROMS%\136037-1307.9A
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + %ROMS%\136043-1105.10A+%ROMS%\136043-1105.10A
SET SOURCES=%SOURCES% + %ROMS%\136043-1109.7A
SET SOURCES=%SOURCES% + %ROMS%\136043-1121.6A
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
SET SOURCES=%SOURCES% + 16K-FF.BIN+16K-FF.BIN
REM 6502 audio program ROMS
SET SOURCES=%SOURCES% + %ROMS%\136043-1120.16R+16K-FF.BIN

COPY/B %SOURCES% ROMS.BIN >NUL

REM Write bitstream and ROMS to flash
..\..\papilio-prog.exe -b ..\..\pipistrello_bscan_spi_6slx45csg324.bit -f ..\iseconfig\build\gauntlet_top.bit -a 390000:ROMS.BIN -v
REM DEL ROMS.BIN
PAUSE
